<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>A Quixotic Apartment Search. ¬∑ 28mm.github.io</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="A Quixotic Apartment Search." />
<meta name="twitter:description" content="  Introduction  Lease-less In Seattle  How Many NPR Moments is Too Many?  What Does Walkability Measure?  Eyes On The Street  Conclusion">

<meta name="description" content="  Introduction  Lease-less In Seattle  How Many NPR Moments is Too Many?  What Does Walkability Measure?  Eyes On The Street  Conclusion">



<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link rel="stylesheet" href="/assets/core.css">
<link rel="canonical" href="/notes/a-quixotic-apartment-search">
<link rel="alternate" type="application/atom+xml" title="28mm.github.io" href="/feed.xml" />




<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


	</head>

	<body>

		<aside class="logo">

	

	<a href="/">
		<img src="http://www.gravatar.com/avatar/f9ca90ff91459baa73f9be03289a7c80.png?s=80" class="gravatar">
	</a>
	<span class="logo-prompt">Back to Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>A Quixotic Apartment Search.</h1>
		<time>May 23, 2017</time>
	</div>

	<div class="divider"></div>

	<ol>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#lease-less-in-seattle">Lease-less In Seattle</a></li>
  <li><a href="#how-many-npr-moments-is-too-many">How Many NPR Moments is Too Many?</a></li>
  <li><a href="#what-does-walkability-measure">What Does Walkability Measure?</a></li>
  <li><a href="#eyes-on-the-street">Eyes On The Street</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ol>

<h2 id="introduction">Introduction</h2>

<p>Finding an apartment is a chore like few others. For one thing, it can be difficult to recognize a good deal, without closely following the market. For another, realtors often misrepresent their properties in an effort to make them more attractive.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> It can be exhausting to evaluate the thousands of apartments listed in a busy market, but renting an apartment is <em>significant</em>.</p>

<p>For most of us, rent constitutes a large fraction of income, while our address determines the amount of time we lose commuting, and if we can reasonably bike to work. For these reasons alone, it is worth making a deliberate, rather than improvised search, for a next apartment. Where to start?</p>

<p>Services like Craigslist and Zillow are like a firehose of listings, brimming with useful information, including: price, area (ft<sup>2</sup>), floorplan, neighborhood, and pet-tolerance. Perhaps collecting data from these services could help characterize the rental market, and inform an apartment search?</p>

<h2 id="lease-less-in-seattle">Lease-less In Seattle</h2>

<p>A couple years ago, the blog <a href="http://chrisholdgraf.com/quick-craigslist-data-analysis/">Predictably Noisy</a> carried an analysis of Bay Area rents‚Äìbased on Craigslist data‚Äìwith a series of figures showing the relationship between apartment size and price per square foot, as well as the distribution of these two variables. To get started, I reproduced those plots for Seattle.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></p>

<p><img src="http://localhost:4000/assets/seattle-apartments/see-ppsf-by-bedrooms.png" class="figure" /></p>

<p>In this figure, price per square foot is plotted against area, and the most common floorplans are assigned a color. Space tends to become cheaper, per unit area, as you rent more of it.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/see-ppsf-dist.png" class="figure" /></p>

<p>Here we see that apartments of each type are available at a wide range of prices per square foot. (And that studios command sometimes astonishing rents.)</p>

<p>Immediately north of Seattle, Snohomish County provides an interesting counterpoint. Fewer apartments are listed here, but only a handful cost more than $3/ft<sup>2</sup>. In fact a majority are available for around $2/ft<sup>2</sup>, or less.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/sno-ppsf-by-bedrooms.png" class="figure" /></p>

<h2 id="how-many-npr-moments-is-too-many">How Many NPR Moments Is Too Many?</h2>

<p>Apartments in Snohomish County are offered for reliably low rates, but another feature they share is a long, dystopian commute into seattle. Jean Luc Godard‚Äôs 1967 film, <em>Weekend</em>, neatly captures the experience.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/weekend.jpg" alt="Weekend - Jean Luc Godard (1967)" /></p>

<p>Is a comparison to <em>Weekend</em> hyperbolic? The <a href="http://www.wsdot.com">WSDOT</a> publish estimated travel times between Lynnwood and Downtown Seattle. I collected these estimates for the first two weeks of May, 2017, and plotted them, below.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/traffic.png" class="figure" /></p>

<p>And this is only southbound traffic. Actual commute times from Snohomish County likely exceed these, because most apartments are neither adjacent to the freeway, nor close to Lynnwood.<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup></p>

<h3 id="is-distance-a-reliable-proxy-for-commute-duration">Is Distance A Reliable Proxy For Commute Duration?</h3>

<p>So far, Craigslist data have been enough to get a general picture of the apartment rental market, and WSDOT traffic estimates have been enough to to rule-out Snohomish County, altogether. But, Seattle‚Äôs crosstown traffic is no picnic, either.</p>

<p>Neighborhood and distance are commonly used as proxies for commute duration, which we assume increases with distance. But, how much influence do the vagaries of Seattle‚Äôs arterial, and public transit infrastructure, exert?</p>

<p>To understand these effects, we need greater location precision. On craigslist, the location field is often empty, or uselessly vague. Zillow, on the other hand, is a more reliable source of addresses, and other structured data.<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup></p>

<p>The <a href="https://developers.google.com/maps/documentation/directions/">Google Directions API</a> estimates trip duration, between arbitrary locations. It supports a variety of transit modes (walking, biking, driving, public transit), and can factor expected traffic into its calculations.</p>

<p>Since I am currently interviewing for jobs,<sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup> I was interested in the expected commute times from available rentals to prospective offices. I wanted to test the assumption that a nearby apartment offers a shorter commute.</p>

<p>To that end, the following figures show expected commutes from Zillow-listed apartments in Seattle, to an office in Ballard, by 9:00 AM on a weekday morning. Walking trips are shown in blue; bus trips are colored according to the number of transfers needed, following an obvious pattern.</p>

<p><img class="figure" src="http://localhost:4000/assets/seattle-apartments/distance-vs-commute-by-legs.png" /></p>

<p>Here we see the expected linear relationship between distance and commute duration. However, there is quite a bit of variance (r<sup>2</sup> = 0.794). We can conclude that proximity alone is a dubious predictor of time lost riding and transferring between buses.</p>

<h3 id="what-about-nearby-apartments">What About Nearby Apartments?</h3>

<p><img src="http://localhost:4000/assets/seattle-apartments/dvc-small.png" class="figure" /></p>

<p>For commutes shorter than 1.7 km, distance more reliably predicts commute duration. Perhaps a walking tour within this radius would locate a suitable apartment more quickly? This approach would be considerably less complicated.</p>

<p>Ideally, I would find an apartment featuring a short commute (less than a half hour) for less than $2.5/ft<sup>2</sup>. The figure below presents listings in three adjacent postal codes.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/zip-search.png" class="figure" /></p>

<p>98107 encompases lower Ballard, and the neighborhood realtors have dubbed <em>Frelard</em>. Unsurprisingly, it seems to offer the best commute. 98103 extends from Lake Union, in Fremont, to N. 100<sup>th</sup> St, in Greenwood, and also offers reasonable commutes.</p>

<p>98199 is a different story. Queen Anne and Magnolia are separated from Ballard and Fremont by only the Ship Canal. These are <em>long</em> commutes, so I am better off looking North of the Ship Canal.</p>

<h2 id="what-does-walkability-measure">What Does Walkability Measure?</h2>

<p>Rents and commute durations have proven easy quantities to obtain. And, because of their importance, they form a good basis for comparing listings. But, given a choice, few of us would rent an apartment because it optimized <em>just</em> these variables.</p>

<p>In practice, we are concerned with a lot else. For instance, we might want an apartment located close to friends, or one with trustworthy management. But, individually, few of these concerns are as significant, or as easily quantified.</p>

<p>With that said, I live close to several independent caf√©s‚Äìthis being Seattle‚Äìand rather enjoy my options. Access to caf√©s, like these, as well as to grocers, laundromats, and other everyday businesses, is important to me. In realtors‚Äô parlance, I prize <em>walkability</em>.</p>

<p>Walkability indices summarize certain of these secondary concerns in a single comparable quantity. To the extent that they succeed, in this, they promise to reduce the tedium of prioritizing listings.</p>

<h3 id="walk-score">Walk Score</h3>

<p><a href="https://www.walkscore.com/">Walk Score</a>, along with the related Bike and Transit Scores, is a proprietary metric promoted by the real estate company, Redfin. The Walk Score associated with an address estimates how easily everyday errands can be accomplished there, without a car.</p>

<p>Walk Scores are a function of the distances to ammentities in various categories. <a href="https://en.wikipedia.org/wiki/Walk_Score#cite_note-7">Wikipedia</a> have a dated (2013) run-down of the algorthim. My (limited) efforts did not turn up a more recent or authoratative description.</p>

<p>The following scale is used for interpretation. E.g. since my apartment has a Walk Score of 85, I should be able to accomplish most errands on foot. Evidently my neighborhood is missing something.<sup id="fnref:6"><a href="#fn:6" class="footnote">6</a></sup></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Score</th>
      <th style="text-align: left">Interpretation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">90-100</td>
      <td style="text-align: left">Everyday errands are possible without a car</td>
    </tr>
    <tr>
      <td style="text-align: left">70-89</td>
      <td style="text-align: left">Most errands can be accomplished on foot</td>
    </tr>
    <tr>
      <td style="text-align: left">50-60</td>
      <td style="text-align: left">Some errands can be accomplished on foot</td>
    </tr>
    <tr>
      <td style="text-align: left">25-49</td>
      <td style="text-align: left">Most errands require a car</td>
    </tr>
    <tr>
      <td style="text-align: left">0-24</td>
      <td style="text-align: left">Almost all errands require a car</td>
    </tr>
  </tbody>
</table>

<p>I had hoped to do more with Walk Score, perhaps using it to exclude certain listings, or give priority to others. Because I wasn‚Äôt granted an API key, I decided to look elsewhere. ü§∑</p>

<h3 id="the-epa-walkability-index">The EPA Walkability Index</h3>

<p>I have to admit that I was feeling just a little let down by the private sector, so I turned, instead, to Uncle Sam. The EPA calculate a <a href="https://developer.epa.gov/walkability-index-2/">walkability index</a> for each of the 2010 census block groups.<sup id="fnref:7"><a href="#fn:7" class="footnote">7</a></sup></p>

<p>So, how does walkability vary between census block groups, in Seattle, and what does it measure?</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/map.png" class="figure" /></p>

<p>Outside of a few neighborhoods: Downtown, Belltown, Fremont, Wallingford, parts of Ballard, and Capitol Hill, the EPA estimate middling walkability across Seattle.</p>

<p>Certainly, the highest ranked neighborhoods <em>are</em> walkable, but I expected others to score higher than they did. Just what are we looking at? Certainly not <em>my</em> assessments. The EPA walkability index is a weighted combination of terms drawn from the EPA‚Äôs <a href="https://www.epa.gov/smartgrowth/smart-location-mapping#walkability">Smart Location Database</a>.</p>

<p>The full documentation is worth reading, but I will briefly highlight four terms of interest.</p>

<ol>
  <li><a href="#density">Density</a></li>
  <li><a href="#land-use-diversity">Land use diversity</a></li>
  <li><a href="#distance-to-fixed-guideway-transit">Distance to fixed-guideway transit</a></li>
  <li><a href="#destination-accessibility">Destination accessibility</a></li>
</ol>

<p><a name="density"></a></p>
<h4 id="1-density">1. Density</h4>

<p>Here, density can refer to housing units per acre, or residents per acre, in areas where development <em>can</em> occur. Because public parks, zoos, beaches, and cemeteries cannot be developed, their area is subtracted from the total area of the block group.</p>

<p>The exclusion of protected areas from the density term may explain the otherwise surprising coloration of the block groups containing <em>Seward</em>, <em>Discovery</em>, and <em>Carkeek</em> Parks.</p>

<p><a name="land-use-diversity"></a></p>
<h4 id="2land-use-diversity">2.Land use diversity</h4>

<p>Jane Jacobs advocated for neighborhoods that support diverse uses, i.e. both residential, and commercial. Employment and population aggregates combine to measure this diversity.</p>

<script type="math/tex; mode=display">E = [\sum_{i=1}^{4} P_{i}*ln(P_{i})] /ln(n)</script>

<p>Values of <script type="math/tex">P_{i}</script> reflect the number of jobs in 3 sectors, and the number of residents: (1) commercial, industrial, and instituational jobs, (2) retail jobs, (3) recreational jobs, and (4) resdients.</p>

<p><a name="distance-to-fixed-guideway-transit"></a></p>
<h4 id="3-distance-to-fixed-guideway-transit">3. Distance to fixed-guideway transit</h4>

<p>Fixed guideway, here, refers to rail, light rail, subways, ferries, and trollies, but <em>not</em> buses. Rather than a distance, this metric counts the number of fixed-guideway transit stations within 1/4 mile, and 1/2 mile.</p>

<p>Seattle is interesting because it has many more bus routes (including so-called <em>bus rapid transit</em>) than it has fixed-guideway routes. Additionally, its street cars and monorail are completely useless (although some will disagree).</p>

<p><a name="destination-accessibility"></a></p>
<h4 id="4-destination-accessibility">4. Destination accessibility</h4>

<p>Destination accessibility measures, on the one hand, how many working age residents of nearby census tracts can access jobs in a given block group via different modes of transportation. On the other it measures the accessability of jobs in nearby census tracts to residents of the given block group.</p>

<h4 id="application-of-the-epa-walkability-index">Application of the EPA walkability index</h4>

<p>The EPA walkability index is a good case study in the creation of such an index, and is probably useful to its intended audience of city planners. However, it isn‚Äôt well suited to helping choose between apartments.</p>

<p>For one thing, the calculated walkability of neighboring block groups often varies. What would happen if their borders moved, or shrank? Esepcially along the borders of census block groups, these differences give a distorted picture of actual walkability.</p>

<p>The data are old. The last census was taken in 2010, and Seattle has changed, considerably, since then. For starters, its density has increased, and more fixed guideway transit exists.</p>

<p>Nevertheless, it has nice qualities. Not least of these: it‚Äôs derived from easily understood terms. As I think about what I want from a walkable neighborhood, I am glad to have adaptable public domain tools, where I might otherwise depend on proprietary solutions, like Walk Score.</p>

<h2 id="eyes-on-the-street">Eyes On The Street</h2>

<p>We can see many of Jane Jacobs‚Äô views reflected in tools like Walk Score and The EPA‚Äôs Walkability Index, but her methods are at least as interesting.</p>

<p>Essentially, Jacobs advocated for close observation. The illustation credit to her <em>Death and Life of Great American Cities</em>, reads:</p>

<blockquote>
"The scenes that illustrate this book are all about us. For illustrations, please look closely at real cities. While you are looking, you might as well listen, linger, and think about what you see."
</blockquote>

<p>And, in the following pages, she offers a suggestion about what we can hope to discover, by paying attention to the <em>look of things</em>, namely: <em>the way they work</em>.</p>

<blockquote>
 "the look of things and the way they work are inextricably bound together..."
</blockquote>

<p>Measures of walkability depend on demographics, land use, and transit, in part because these quanitities are readily available, and easy to work with. They can‚Äôt as easily consider <em>the look of things</em>.</p>

<p>Compared with measures like these, field observations would be expensive to make, and confounding to work with. Thats an oft repeated assumption, at least, but recent advances in computer vision could challange it.</p>

<h3 id="general-image-classification">General Image Classification</h3>

<p>For a first experiment, I collected several hundred pictures each, of three distinctive neighborhoods: the <em><font color="#4e73b0">Lower East Side</font></em>, <em><font color="#68ae7c">Le Marais</font></em>, and San Francisco‚Äôs <em><font color="#c45155">Mission District</font></em>. I wanted to know if a general image classifier would identify the unique visual character of these neighborhoods.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/google-tsne.png" class="figure" /></p>

<p>In the figure above, each picture was processed by Google‚Äôs <a href="https://cloud.google.com/vision/">Cloud Vision API</a><sup id="fnref:8"><a href="#fn:8" class="footnote">8</a></sup> to produce a vector of confidence scores (i.e. the confidence that a picture depicts a given subject). <em>In other words, they‚Äôre grouped by subject, to the extent that an image classifier has made sense of them.</em><sup id="fnref:9"><a href="#fn:9" class="footnote">9</a></sup></p>

<p>Because I sampled pictures from Bing Image Search, they reflect what people have found interesting in each neighborhood. In the <em><font color="#c45155">Mission District</font></em>, murals make a popular subject (you can see this cluster in the lower left), while fire escapes feature in many photographs of the <em><font color="#4e73b0">Lower East Side</font></em>.</p>

<p>It‚Äôs worth noting that Google‚Äôs Cloud Vision API lacks some of Jacobs‚Äô descriptive genius. Where Jacobs saw ‚Äúpromenades that go from no place to nowhere, and have no promenaders,‚Äù software might instead report <em>buildings</em>, and <em>atmospheric phenomena</em>.</p>

<p>In some places, as with murals in the <em><font color="#c45155">Mission</font></em>, pictures of a certain neighborhood cluster together. Isolated clusters indicate something unique, either about that neighborhood or the pictures chosen to represent it.</p>

<p>Conversely, areas where pictures from different neighborhoods overlap suggest more generic subjects that might be found in any neighborhood: <em>buildings</em>, <em>people</em>, and <em>cars</em>, for instance.</p>

<p>And what of Seattle‚Äôs <em><font color="#4e73b0">Capitol Hill</font></em>, <em><font color="#68ae7c">Belltown</font></em>, and <em><font color="#c45155">Ballard</font></em> neighborhoods? I would‚Äôve hoped for more distinct groupings. For example, old brick buildings get grouped with new ones.</p>

<p><img src="http://localhost:4000/assets/seattle-apartments/google-tsne-seattle.png" class="figure" /></p>

<p>A general image classifier may be the wrong tool. A human observer given the same task would likely identify different features in each picture, and arrange them according to a different logic.</p>

<p>A more fruitful approach might involve a domain specific model, trained to identify features of particular interest: distinguishing between different kinds of building, for instance, or registering eyesores of various description.</p>

<h2 id="conclusion">Conclusion</h2>

<p>It took just a little code to scrape and interrogate an interesting dataset, with considerable relevance to my daily life. Happily, my initial focus on rents and commuting yielded the most benefit for the least work.</p>

<p>Looking past these first experiments, towards the complexities of neighborhoods and urban design, has been no less interesting. However, for a greater investment of effort, I have less to show. Neighborhood trivia, and a few GIS tricks, for instance, but nothing directly useful.</p>

<p>A lot could still be done, in this more quixotic direction. Urban life raises many intriguing questions; public-ish data and simple methods may answer some of them.</p>

<p>However, in the face of diminishing returns, I exect I‚Äôll move my apartment search back into meatspace‚Äî knowing, at least, that I won‚Äôt have my time wasted by as many bogus listings.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Realtors engage in photographic trickery, commonly using fisheye lenses and manipulated colors, to give false impressions. Furthermore, they often mis-state the proximity of their properties to public transportation, popular neighborhoods, and major employers.&nbsp;<a href="#fnref:1" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:2">
      <p>To collect enough listings for this project, I used <a href="https://github.com/juliomalegria/python-craigslist">python-cragislist</a>, and <a href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup4</a> to retrieve and parse them, and a <a href="https://www.sqlite.org/">sqlite</a> database, for persistent storage.&nbsp;<a href="#fnref:2" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:3">
      <p>In fact, most apartments in Lynnwood are listed on the see (Seattle) Craigslist, rather than the sno (Snohomish County) Craigslist. Most sno listings are further north.&nbsp;<a href="#fnref:3" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:4">
      <p>Zillow use javascript and asynchronous loading techniques extensively on their website, making it more difficult to scrape. I used <a href="http://www.seleniumhq.org/">Selenium</a>, and <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads">ChromeDriver</a> to collect listings.&nbsp;<a href="#fnref:4" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:5">
      <p>Considering <em>systems administration</em> and <em>systems engineering</em> roles, in the Seattle area. Email me: <a href="mailto:patrick.mcmurchie@gmail.com">patrick.mcmurchie@gmail.com</a>&nbsp;<a href="#fnref:5" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:6">
      <p>Looking closer at my apartment‚Äôs Walk Score, it appears to lack nearby <em>entertainment</em>. My current activity‚Äì <em>blogging</em>‚Äì doesn‚Äôt suggest otherwise.&nbsp;<a href="#fnref:6" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:7">
      <p>Census blocks are the smallest geographic unit used for the US Census. Block groups are composed of census blocks, and are the smallest unit for which the Census publish aggregate data. Tracts are larger.&nbsp;<a href="#fnref:7" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:8">
      <p>I tried the same exercise with equivalent APIs from Clarifai, Amazon, and Microsoft, with superficially similiar results, but have not probed deeply.&nbsp;<a href="#fnref:8" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:9">
      <p>Dimensionality reduction was accomplished with <a href="https://lvdmaaten.github.io/tsne/">t-SNE</a>, as implemented in <a href="http://scikit-learn.org/stable/">scikit-learn</a>.&nbsp;<a href="#fnref:9" class="reversefootnote">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>


</article>

<div class="page-navigation">
	
    <a class="next" href="/notes/osx-photo-search" title="NEXT: Photo Metadata and Search on MacOS">&lt;&lt;</a>
		<span> &middot; </span>
  
		<a class="home" href="/" title="Back to Homepage">Home</a>
  
</div>

		</main>

		<div class="footer">
  <span class="block">&copy; 2017 Patrick McMurchie</span>
</div>


	</body>

</html>
