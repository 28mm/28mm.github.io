<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>28mm.github.io</title>
    <description>Discursions</description>
    <link>http://localhost:4000</link>
    
      
        <item>
          <title>San Juan Islands: Tidal Currents</title>
          <description>&lt;p&gt;This is a little chart summarizing tidal currents at different NOAA stations in the San Juan Islands, for 2023. I may post an interactive version, later.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/tides-and-currents/tides-and-currents.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Note: duration is given in minutes, speed is in knots. the two crossbars show median duration and speed. The red circles show today’s maximum currents (typically two floods and two ebbs of different magnitude).&lt;/p&gt;
</description>
          <pubDate>2023-04-15T00:00:01-07:00</pubDate>
          <link>http://localhost:4000/notes/tides-and-currents</link>
          <guid isPermaLink="true">http://localhost:4000/notes/tides-and-currents</guid>
        </item>
      
    
      
        <item>
          <title>Better Photo Search for MacOS with Clarifai</title>
          <description>&lt;script src=&quot;/assets/terraform-graphs-4/jquery.slim.min.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;https://d3js.org/d3.v4.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/d3-tip.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/mac-photos-2/coincidence.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/mac-photos-2/selectize.min.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/fontawesome-all.min.js&quot;&gt;&lt;/script&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-4/selectize.css&quot; /&gt;

&lt;style&gt;

.clarifai {
  background-color: #1b9e77;
  padding: 5px;
  margin: 2px;
}

.photos {
  background-color: #d95f02;
  padding: 5px;
  margin: 2px;
}

.rekognition {
  background-color: #7570b3;
  padding: 5px;
  margin: 2px;
}
&lt;/style&gt;

&lt;h3 id=&quot;introduction&quot;&gt;Introduction&lt;/h3&gt;

&lt;p&gt;I’ve previously written about &lt;a href=&quot;/notes/osx-photo-search&quot;&gt;a method of enabling Spotlight search of Photos.app libraries&lt;/a&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; using tags generated by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photoanalysisd&lt;/code&gt; that are otherwise only available through &lt;em&gt;Photos.app.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;But &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photoanalysisd&lt;/code&gt; is limited to something like 1,000 unique subjects, while some commercial services advertise  recognition of 10x that number, and might be expected to produce more relevant tags.&lt;/p&gt;

&lt;p&gt;This post considers Clarifai along with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photoanalysisd&lt;/code&gt;, comparing their performance on the task of classifying pictures from my photo library.&lt;/p&gt;

&lt;h3 id=&quot;no-useful-benchmarks&quot;&gt;No Useful Benchmarks&lt;/h3&gt;

&lt;p&gt;Commercial image classification services like Clarifai and Rekognition seem oddly reluctant to publish competitive benchmarks, which might help someone choose between them.&lt;/p&gt;

&lt;p&gt;Some vendors tout performance in academic competitions like the ILSVRC, but this isn’t a direct test of their commercial offerings and is therefore only so useful.&lt;/p&gt;

&lt;p&gt;Clarifai, however, do make &lt;em&gt;one&lt;/em&gt; interesting claim about their general model: that it classifies 11,000 subjects. But is that a lot compared with Google, for instance? We don’t actually know.&lt;/p&gt;

&lt;p&gt;(Nor do we know what those 11,000 subjects are and whether Clarifai reliably detects them.)&lt;/p&gt;

&lt;h3 id=&quot;simulated-search&quot;&gt;Simulated Search&lt;/h3&gt;

&lt;p&gt;To get a sense of how &lt;em&gt;Clarifai&lt;/em&gt; compares with &lt;em&gt;Photos.app&lt;/em&gt; on the task of classifying an individual’s Photo library, I submitted several thousand pictures from mine.&lt;/p&gt;

&lt;p&gt;You can use the search field below to get a sense of the breadth and specifity of tags generated by each service, as well as the frequency with which particular tags occur.&lt;/p&gt;

&lt;p&gt;Key: &lt;span class=&quot;clarifai&quot;&gt;Clarifai&lt;/span&gt;&lt;span class=&quot;photos&quot;&gt;Photos.app&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;select style=&quot;width: 100%&quot; id=&quot;frequency-search&quot;&gt;&lt;/select&gt;&lt;/p&gt;

&lt;p&gt;Of course these are all pictures from my library, and therefore biased towards my interests, but the code is available on &lt;a href=&quot;https://www.github.com/28mm/macos-photo-scripts&quot;&gt;GitHub.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Based on this experiment, and in view of my expectations, I’m impressed with the performance of Apple’s classifier. As I begin typing a query, Apple often seems to anticipate it with a relevant tag.&lt;/p&gt;

&lt;p&gt;But Clarifai adds a great deal of breadth, even if some of the tags don’t correspond with likely search terms (e.g. “no person”).&lt;/p&gt;

&lt;p&gt;So, it would be nice if Spotlight tags could be drawn from services like Clarifai and Rekognition as well as Photos.app.&lt;/p&gt;

&lt;h3 id=&quot;implementing-multi-vendor-tagging&quot;&gt;Implementing Multi-Vendor Tagging&lt;/h3&gt;

&lt;p&gt;The approach I settled on was to maintain a sqlite database seperate from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos.db&lt;/code&gt; that contains both the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photoanalysisd&lt;/code&gt; tags and tags from 3rd-party services.&lt;/p&gt;

&lt;p&gt;Find the tools referenced below on &lt;a href=&quot;https://www.github.com/28mm/macos-photo-scripts&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Initialize a database (here: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;new.db&lt;/code&gt;), populating it with information about your Photos.app library, and synchronize the two.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./alternative-classifiers.py &lt;span class=&quot;nt&quot;&gt;--init&lt;/span&gt;              &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;--db&lt;/span&gt; new.db                                 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;--photos-db&lt;/span&gt; ~/Pictures/..../photos.db       &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;--lib&lt;/span&gt; ~/Pictures/..../library.photoslibrary &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;--sync&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Please see the note &lt;a href=&quot;https://www.github.com/28mm/macos-photo-scripts&quot;&gt;here&lt;/a&gt; about stopping &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photolibraryd&lt;/code&gt;, to release its lock on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos.db&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;Then add tags from a 3rd-party service like Clarifai.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CLARIFAI_API_KEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;YOUR_API_KEY_HERE&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./alternative-classifiers.py &lt;span class=&quot;nt&quot;&gt;--db&lt;/span&gt; new.db &lt;span class=&quot;nt&quot;&gt;--clarifai&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And finally, update the relevant xattrs, so that spotlight can index our new tags.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./alternative-classifiers.py &lt;span class=&quot;nt&quot;&gt;--db&lt;/span&gt; new.db &lt;span class=&quot;nt&quot;&gt;--xattrs&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now it should be possible to find Clarifai-specific tags like &lt;span class=&quot;clarifai&quot;&gt;No Person&lt;/span&gt; with Spotlight:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mdfind &lt;span class=&quot;s1&quot;&gt;&apos;tag:no person&apos;&lt;/span&gt;
.../Masters/2015/04/22/20150422-011045/IMG_0083.JPG
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;note-adding-new-tags-to-photosapp&quot;&gt;Note: Adding New Tags to Photos.app&lt;/h3&gt;

&lt;p&gt;My last post on this subject showed how to extract tags from Photos.app, via a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TEXT&lt;/code&gt; column in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos.db&lt;/code&gt; called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RKVersion_stringNote.value&lt;/code&gt;. With this post, I had hoped it would be possible to do the reverse.&lt;/p&gt;

&lt;p&gt;The obvious thing to try: appending to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RKVersion_stringNote.value&lt;/code&gt;, and updating the plist where the list of categories is kept, doesn’t get the job done.&lt;/p&gt;

&lt;p&gt;When the last post was discussed on Hacker News, several commentors pointed out how absurd this all is–that it should be trivial to retrieve and update information about your own photographs. I agree with them entirely.&lt;/p&gt;

&lt;p&gt;(However, if you have a suggestion of how to solve this particular problem, &lt;em&gt;do&lt;/em&gt; let me know!)&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Combining Clarifai’s tags with Apple’s has produced a marked improvement in the searchability of my Photo library.&lt;/p&gt;

&lt;p&gt;I wonder if adding tags from additional services such as Rekognition, or Google Computer Vision would add as much value, or at what point adding another general model becomes redundant.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Comment&lt;/strong&gt; and &lt;strong&gt;Suggestion&lt;/strong&gt; to &lt;strong&gt;&lt;a href=&quot;mailto:patrick.mcmurchie@gmail.com&quot;&gt;patrick.mcmurchie@gmail.com&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;script src=&quot;/assets/mac-photos-2/frequency.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
//activate(&apos;#coincidence&apos;, &apos;/assets/mac-photos-2/blob.json&apos;, 1000, 1000);
freq_activate(&apos;#frequency-search&apos;, &apos;/assets/mac-photos-2/freq.json&apos;);
&lt;/script&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;/notes/osx-photo-search&quot;&gt;https://28mm.github.io/notes/osx-photo-search&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
          <pubDate>2018-02-19T23:00:01-08:00</pubDate>
          <link>http://localhost:4000/notes/better-photo-search-for-macos</link>
          <guid isPermaLink="true">http://localhost:4000/notes/better-photo-search-for-macos</guid>
        </item>
      
    
      
        <item>
          <title>Exploring Terraform Graphs With D3.js Part 4</title>
          <description>&lt;script src=&quot;/assets/terraform-graphs-4/jquery.slim.min.js&quot;&gt;&lt;/script&gt;

&lt;!--&lt;script src=&quot;/assets/terraform-graphs-4/bootstrap.min.js&quot;&gt;&lt;/script&gt;--&gt;
&lt;script src=&quot;/assets/terraform-graphs-4/fontawesome-all.min.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/d3.v4.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/d3-tip.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/blast-radius.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/categories.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/svg-pan-zoom.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-4/selectize.js&quot;&gt;&lt;/script&gt;

&lt;!--&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-4/bootstrap.min.css&quot;&gt;--&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-4/selectize.css&quot; /&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-4/style.css&quot; /&gt;

&lt;h3 id=&quot;tldr&quot;&gt;TL;DR&lt;/h3&gt;

&lt;p&gt;This is the fourth in a series of posts about &lt;em&gt;&lt;a href=&quot;/blast-radius-docs/&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt;, a tool for producing interactive visualizations of &lt;em&gt;Terraform&lt;/em&gt; dependency graphs.&lt;/p&gt;

&lt;p&gt;Part three (parts: &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;one&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-2&quot;&gt;two&lt;/a&gt;, &lt;a href=&quot;/notes/terraform-graphs-3&quot;&gt;three&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-4&quot;&gt;four&lt;/a&gt;) introduced module support, and a marginal improvement in the width of some figures, but stopped short of capably handling large real-world graphs.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs-4/7-modules.svg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The figure above (with interactions &lt;em&gt;disabled&lt;/em&gt;) demonstrates the issue: when configurations grow beyond a certain threshold, relationships between resources become harder to follow. This post considers several partial solutions.&lt;/p&gt;

&lt;h3 id=&quot;pan-and-zoom&quot;&gt;Pan and Zoom&lt;/h3&gt;

&lt;p&gt;Thus far the best way of navigating larger graphs has been the browser’s scrolling and zoom features. But these are mind-meltingly awkward, for our purpose.&lt;/p&gt;

&lt;p&gt;One issue is that browser-zoom applies globally, magnifying unrelated features to grotesque proportions, or causing them to vanish—just as the graph comes fully into view.&lt;/p&gt;

&lt;p&gt;And the less said about horizontal scrolling, the better. &lt;em&gt;&lt;a href=&quot;https://github.com/ariutta/svg-pan-zoom&quot;&gt;svg-pan-zoom.js&lt;/a&gt;&lt;/em&gt; implements click-and-drag panning, as well as various zooming mechanisms–the scrollwheel seems most natural to me.&lt;/p&gt;

&lt;p&gt;&lt;button id=&quot;pz-zoom-out&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-search-minus&quot;&gt;&lt;/i&gt;&lt;/button&gt;
&lt;button id=&quot;pz-zoom-in&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-search-plus&quot;&gt;&lt;/i&gt;&lt;/button&gt;
&lt;button id=&quot;pz-download&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-download&quot;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/p&gt;
&lt;div id=&quot;pz&quot;&gt;&lt;/div&gt;

&lt;p&gt;This example is somewhat hampered by its small size and mail-slot proportions. Better examples, on broader canvas, such as &lt;a href=&quot;https://28mm.github.io/blast-radius-docs/examples/terraform-provider-aws/networking/&quot;&gt;this&lt;/a&gt; are available &lt;a href=&quot;https://28mm.github.io/blast-radius-docs/examples/&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(These features are badly broken on mobile, now, where pan and zoom gestures had worked well-enough, previously. Apologies if you are reading this on a phone or tablet!)&lt;/p&gt;

&lt;h3 id=&quot;search&quot;&gt;Search&lt;/h3&gt;

&lt;p&gt;Pan and zoom work best when the resource of interest along with resources related to it are already selected. Until then, panning isn’t a very efficient means of exploration.&lt;/p&gt;

&lt;form class=&quot;form-inline my-2 my-lg-0&quot; id=&quot;graph-search-form&quot;&gt;
&lt;select style=&quot;width: 100%&quot; id=&quot;graph-search&quot;&gt;&lt;/select&gt;
&lt;/form&gt;
&lt;p&gt;&lt;button id=&quot;graph-zoom-out&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-search-minus&quot;&gt;&lt;/i&gt;&lt;/button&gt;
&lt;button id=&quot;graph-zoom-in&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-search-plus&quot;&gt;&lt;/i&gt;&lt;/button&gt;
&lt;button id=&quot;graph-download&quot; class=&quot;btn&quot;&gt;&lt;i class=&quot;fas fa-download&quot;&gt;&lt;/i&gt;&lt;/button&gt;&lt;/p&gt;
&lt;div id=&quot;graph&quot;&gt;&lt;/div&gt;

&lt;p&gt;There are some rough edges to be worked out, but it does what’s needed.&lt;/p&gt;

&lt;h3 id=&quot;prune-to-sub-graph&quot;&gt;Prune to Sub-Graph&lt;/h3&gt;

&lt;p&gt;Here is the same graph, again (with interactions &lt;em&gt;disabled&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs-4/7-modules.svg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And below is the same graph with a single resource highlighted, along with its dependencies and dependents. This is an improvement, especially with pan and zoom, but less helpful in cases where the subgraph is not as contained in one region of the figure.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs-4/7-modules-selected.svg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;em&gt;prune to selection&lt;/em&gt; button generates a new figure with only the selected resource’s dependencies and dependents.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs-4/7-modules-pruned.svg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Sub-graphs retain the color scheme from the larger diagram, but their layout differs (often dramtically). Unfortunately, it isn’t easily possible to bias &lt;em&gt;Graphviz&lt;/em&gt; in favor of its previous layout; nodes jump around with abandon.&lt;/p&gt;

&lt;h3 id=&quot;docker-support&quot;&gt;Docker Support&lt;/h3&gt;

&lt;p&gt;One annoyance often met by new users is &lt;em&gt;Blast Radius&lt;/em&gt;’ reliance on recent versions of Python (3.5+), and Graphviz. Docker is a convenient way to hide the sordid details of Python versioning and package management.&lt;/p&gt;

&lt;p&gt;An update image is available from the docker registry as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;28mm/blast-radius&lt;/code&gt;. If the current working directory contains a terraform project, invoke it like so:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--cap-add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;SYS_ADMIN &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 5000:5000 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;:/workdir:ro 28mm/blast-radius
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Further discussion can be found in the README. Thanks to Buc and Daniel for contributing this.&lt;/p&gt;

&lt;h3 id=&quot;performance&quot;&gt;Performance&lt;/h3&gt;

&lt;p&gt;A further limitation–beyond layout and navigability–for larger graphs is performance. I’ve had reports of graphs taking 10+ minutes to generate! A lower bound for runtime is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform graph | dot -Tsvg&lt;/code&gt;, since &lt;em&gt;Blast Radius&lt;/em&gt; depends on both these programs.&lt;/p&gt;

&lt;p&gt;Some testing with larger projects would be useful. (If anyone reading this, who has an especially large project, wishes to help: I’m interested in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;time terraform graph | dot -Tsvg&lt;/code&gt; vs &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;time blast-radius --svg&lt;/code&gt;)&lt;/p&gt;

&lt;h3 id=&quot;conclusion-and-next-steps&quot;&gt;Conclusion And Next Steps&lt;/h3&gt;

&lt;p&gt;Thus concludes a somewhat delayed chronicle of incremental progress. Thanks for reading this far, and as always:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Comment&lt;/strong&gt; and &lt;strong&gt;Suggestion&lt;/strong&gt; to &lt;strong&gt;&lt;a href=&quot;mailto:patrick.mcmurchie@gmail.com&quot;&gt;patrick.mcmurchie@gmail.com&lt;/a&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;script&gt;


blastradius(&apos;#pz&apos;, &apos;/assets/terraform-graphs-4/pz-demo.svg&apos;, &apos;/assets/terraform-graphs-4/pz-demo.json&apos;);


blastradius(&apos;#graph&apos;, &apos;/assets/terraform-graphs-4/search-demo.svg&apos;, &apos;/assets/terraform-graphs-4/search-demo.json&apos;);

&lt;/script&gt;

</description>
          <pubDate>2018-02-09T23:00:01-08:00</pubDate>
          <link>http://localhost:4000/notes/d3-terraform-graphs-4</link>
          <guid isPermaLink="true">http://localhost:4000/notes/d3-terraform-graphs-4</guid>
        </item>
      
    
      
        <item>
          <title>Exploring Terraform Graphs With D3.js Part 3</title>
          <description>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-3/style.css&quot; /&gt;

&lt;h3 id=&quot;tldr&quot;&gt;TL;DR&lt;/h3&gt;

&lt;p&gt;This is the third in a series of posts exploring methods of visualizing Terraform dependency graphs, with the goal of producing a tool useful for learning and documentation.&lt;/p&gt;

&lt;div id=&quot;demo1&quot;&gt;&lt;/div&gt;

&lt;p&gt;Above is a representative example. Roll your mouse over one of the nodes to see its definition and to highlight its dependencies. For further information, refer to &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;part one&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-2&quot;&gt;part two&lt;/a&gt;, &lt;a href=&quot;/notes/terraform-graphs-3&quot;&gt;part three&lt;/a&gt;, or &lt;a href=&quot;/notes/d3-terraform-graphs-4&quot;&gt;part four&lt;/a&gt; of this series; or to &lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;GitHub&lt;/a&gt;, where &lt;em&gt;&lt;a href=&quot;/blast-radius-docs&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt; is hosted.&lt;/p&gt;

&lt;h3 id=&quot;terraform-modules&quot;&gt;Terraform Modules&lt;/h3&gt;

&lt;p&gt;Modules greatly simplify Terraform administration, by isolating reusable components. Earlier versions of &lt;em&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; didn’t handle modules very well, or at all.&lt;/p&gt;

&lt;p&gt;For a &lt;a href=&quot;https://28mm.github.io/notes/echo-location&quot;&gt;recent project&lt;/a&gt;,&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; I wanted to launch a single AWS instance in a large number of AWS regions; a perfect fit for modules. Here is a single instance of that module, launched in the AWS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east-1&lt;/code&gt; region, and named the same.&lt;/p&gt;

&lt;div id=&quot;demo2&quot;&gt;&lt;/div&gt;

&lt;p&gt;Here’s the same module reused to launch copies of that instance in both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east-1&lt;/code&gt; (Northern Virginia), and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ap-northeast-2&lt;/code&gt; (Seoul).&lt;/p&gt;

&lt;div id=&quot;demo3&quot;&gt;&lt;/div&gt;

&lt;p&gt;And, here is the same module reused to launch instances in seven regions. This graph in particular highlights the limitations of the visual language used: it is &lt;em&gt;too&lt;/em&gt; colorful, and &lt;em&gt;too&lt;/em&gt; broad. Illegible, in other words.&lt;/p&gt;

&lt;div id=&quot;demo4&quot;&gt;&lt;/div&gt;

&lt;p&gt;Something like Terraform’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--module-depth&lt;/code&gt; parameter would simplify larger diagrams like this one. Better handling of the module registry and other remote sources, is needed as well… but it’s a start.&lt;/p&gt;

&lt;h3 id=&quot;narrowing-some-figures&quot;&gt;Narrowing (Some) Figures&lt;/h3&gt;

&lt;p&gt;In previous posts, I’ve described the tendency for Graphviz layouts of Terraform graphs to sprawl sideways. Some of this is unavoidable, but gains can be realized at the expense of vertical scrolling.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Variable&lt;/em&gt; resources often share a parent. Rather than lay these variables out side by side, they could be “stacked,” one atop the other, without sacrificing clarity.&lt;/p&gt;

&lt;div id=&quot;demo11&quot;&gt;&lt;/div&gt;

&lt;p&gt;(&lt;em&gt;Output&lt;/em&gt; resources often share the same (single) dependency, and parent, and can be “stacked” in the same way. This figure demonstrates that possibility, as well.)&lt;/p&gt;

&lt;h3 id=&quot;code--examples&quot;&gt;Code &amp;amp; Examples&lt;/h3&gt;

&lt;p&gt;The code used to produce these figures can be found on GitHub, as the &lt;em&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt; project.&lt;/p&gt;

&lt;p&gt;Further examples–most of them borrowed from examples/ directories in the Terraform provider ecosystem–can be found on the project’s &lt;a href=&quot;/blast-radius-docs/&quot;&gt;documentation&lt;/a&gt; page.&lt;/p&gt;

&lt;p&gt;If you’re interested in testing &lt;em&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt; in your environment, you can obtain an experimental distribution from the Python Package Index.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;graphviz
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pip3 &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;blastradius
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or clone the GitHub repository, and install an edtitable copy (via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip3 -e&lt;/code&gt;).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/28mm/blast-radius.git
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;blast-radius
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pip3 &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt; requires an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init&lt;/code&gt;-ed Terraform project to run.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;path/to/terraform/project
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform init
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;blast-radius &lt;span class=&quot;nt&quot;&gt;--serve&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;While I’m pleased &lt;em&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;Blast Radius&lt;/a&gt;&lt;/em&gt;, as an exploratory project, more work is needed to make it generally useful. In particular, I’d like to shore up module support, do smarter tooltip layouts, and make it easier to embed figures.&lt;/p&gt;

&lt;p&gt;What do you think?
&lt;strong&gt;Comment&lt;/strong&gt; and &lt;strong&gt;Suggestion&lt;/strong&gt; to &lt;strong&gt;&lt;a href=&quot;mailto:patrick.mcmurchie@gmail.com&quot;&gt;patrick.mcmurchie@gmail.com&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;script src=&quot;https://d3js.org/d3.v4.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-2/js/d3-tip.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-3/terraform-graph.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-3/categories.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;

// use the oldest version of svg_activate
svg_activate(&apos;div#demo1&apos;, 
    &apos;/assets/terraform-graphs-3/demo-1.svg&apos;, 
    &apos;/assets/terraform-graphs-3/demo-1.json&apos;,
    &apos;65%&apos;);


svg_activate(&apos;div#demo2&apos;, 
    &apos;/assets/terraform-graphs-3/demo2.svg&apos;, 
    &apos;/assets/terraform-graphs-3/demo2.json&apos;,
    &apos;100%&apos;);

svg_activate(&apos;div#demo3&apos;, 
    &apos;/assets/terraform-graphs-3/demo3.svg&apos;, 
    &apos;/assets/terraform-graphs-3/demo3.json&apos;,
    &apos;100%&apos;);

svg_activate(&apos;div#demo4&apos;, 
    &apos;/assets/terraform-graphs-3/demo4.svg&apos;, 
    &apos;/assets/terraform-graphs-3/demo4.json&apos;,
    &apos;100%&apos;);

svg_activate(&apos;div#demo11&apos;, 
    &apos;/assets/terraform-graphs-3/demo11.svg&apos;, 
    &apos;/assets/terraform-graphs-3/demo11.json&apos;,
    &apos;65%&apos;);


&lt;/script&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;https://www.github.com/28mm/blast-radius&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;This project attempts to geolocate IPs by measuring latency from points around the world. &lt;a href=&quot;https://28mm.github.io/notes/echo-location&quot;&gt;https://28mm.github.io/notes/echo-location&lt;/a&gt; &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
          <pubDate>2017-12-01T23:00:00-08:00</pubDate>
          <link>http://localhost:4000/notes/terraform-graphs-3</link>
          <guid isPermaLink="true">http://localhost:4000/notes/terraform-graphs-3</guid>
        </item>
      
    
      
        <item>
          <title>Exploring Terraform Graphs With D3.js Part 2</title>
          <description>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs-2/style.css&quot; /&gt;

&lt;h3 id=&quot;tldr&quot;&gt;TL;DR&lt;/h3&gt;

&lt;p&gt;This is the second in a series of posts exploring methods of visualizing Terraform dependency graphs, with the goal of producing a tool useful for learning and documentation. (Parts: &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;one&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-2&quot;&gt;two&lt;/a&gt;, &lt;a href=&quot;/notes/terraform-graphs-3&quot;&gt;three&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-4&quot;&gt;four&lt;/a&gt;; &lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;code&lt;/a&gt;, &lt;a href=&quot;https://28mm.github.io/blast-radius-docs&quot;&gt;documentation&lt;/a&gt;.)&lt;/p&gt;

&lt;div id=&quot;demo1&quot;&gt;&lt;/div&gt;

&lt;p&gt;The &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;first post&lt;/a&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; presented experiments with Graphviz and D3.js, resulting in a promising prototype. Posting these to &lt;a href=&quot;https://www.reddit.com/r/devops/comments/783prc/exploring_terraform_graphs_with_d3js/&quot;&gt;r/devops&lt;/a&gt;&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; led to some interesting discussions (online and off), and thoughts about future work.&lt;/p&gt;

&lt;p&gt;This post takes up the problems of horizontal sprawl, better tooltips, meaningful coloration, and animations; starting with diagrams like the one above, and introducing a series of refinements.&lt;/p&gt;

&lt;h3 id=&quot;reconciling-graphviz-and-d3js&quot;&gt;Reconciling Graphviz and D3.js&lt;/h3&gt;

&lt;p&gt;Graphviz has one thing going for it, so far: its layouts. It can place nodes in order of their dependencies (top to bottom, in this case), whereas the D3.js experiments sometimes became crowded and disorderly.&lt;/p&gt;

&lt;p&gt;However, compared with D3.js, its output is static, dated (1970s, I’d venture), and given to sprawling sideways. What about a combination of the two, using graphviz for layout and D3.js for interactions?&lt;/p&gt;

&lt;style&gt;
div#demo1 &gt; svg {
       height: 400px;
       display: block;
       margin: auto;
}

&lt;/style&gt;

&lt;div id=&quot;demo3&quot;&gt;&lt;/div&gt;

&lt;p&gt;Not bad. Moving resource types to seperate headings reduces overall figure width by 25%, on average, and coloration draws the eye to related resources, regardless of layout.&lt;/p&gt;

&lt;h3 id=&quot;better-tooltips&quot;&gt;Better Tooltips&lt;/h3&gt;

&lt;p&gt;Tooltips present further opportunities for improvement. Thus far, they’ve shown resource definitions, only. It might be nice if they were extended with clear labels, and a list of direct dependencies.&lt;/p&gt;

&lt;div id=&quot;tooltip-demo-1&quot;&gt;&lt;/div&gt;
&lt;style&gt;
div#tooltip-demo-1 &gt; svg {
       height: 600px;
       display: block;
       margin: auto;
}
&lt;/style&gt;

&lt;p&gt;Tooltips could also link to pertinent documentation, implement syntax highlighting, condense verbose definitions (e.g. security groups).&lt;/p&gt;

&lt;h3 id=&quot;meaningful-coloration&quot;&gt;Meaningful Coloration&lt;/h3&gt;

&lt;p&gt;Another question concerns the use of color. Until now, color assignments have been arbitrary, and for the most part, each type of resource has enjoyed its own.&lt;/p&gt;

&lt;p&gt;But this is not entirely satisfying. After a certain threshold, the palette becomes confusing; new colors are not easily distinguished from old ones.&lt;/p&gt;

&lt;p&gt;Grouping resources of related types might help. The aws provider alone supports 320 distinct types of resource in close to 50 categories,&lt;sup id=&quot;fnref:5&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; but typical configurations probably draw from fewer categories.&lt;/p&gt;

&lt;div id=&quot;demo4&quot;&gt;&lt;/div&gt;

&lt;p&gt;Here, resources of type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_route&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_internet_gateway&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_security_group&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_subnet&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_vpc&lt;/code&gt; all have the same color because they belong to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc&lt;/code&gt; group. Hopefully this will clarify larger diagrams.&lt;/p&gt;

&lt;h3 id=&quot;first-animations&quot;&gt;First Animations&lt;/h3&gt;

&lt;p&gt;With provisional answers to the questions of layout, tooltips, and coloration, animations present new and intriguing possibilities. In the figure below, mousing over a resource highlights its dependencies, only.&lt;/p&gt;

&lt;div id=&quot;demo6&quot;&gt;&lt;/div&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Compared with the proofs of concept presented the &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;last post&lt;/a&gt;, these are starting to look useful.&lt;/p&gt;

&lt;p&gt;Aaaand, It’s exciting to begin thinking about further uses of animation, such as presenting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform apply&lt;/code&gt; progress in realtime, or highlighting the subgraphs affected by a commit.&lt;/p&gt;

&lt;p&gt;Have a Suggestion? &lt;a href=&quot;mailto:patrick.mcmurchie@gmail.com&quot;&gt;patrick.mcmurchie@gmail.com&lt;/a&gt; / &lt;a href=&quot;/about&quot;&gt;about&lt;/a&gt;&lt;/p&gt;

&lt;script src=&quot;https://d3js.org/d3.v4.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-2/js/fisheye.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-2/js/d3-tip.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs-2/js/terraform-graph.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;

// use the oldest version of svg_activate
svg_activate_old(&apos;div#demo1&apos;, 
    &apos;/assets/terraform-graphs-2/demo-1.svg&apos;, 
    &apos;/assets/terraform-graphs-2/demo-1.json&apos;);

svg_activate_old(&apos;div#demo2&apos;,
    &apos;/assets/terraform-graphs-2/demo-2.svg&apos;, 
    &apos;/assets/terraform-graphs-2/demo-2.json&apos;);

svg_activate_old(&apos;div#demo3&apos;,
    &apos;/assets/terraform-graphs-2/demo-3.svg&apos;, 
    &apos;/assets/terraform-graphs-2/demo-3.json&apos;);


// use the naive color version of svg_activate w/ tooltips
svg_activate_simple(&apos;div#tooltip-demo-1&apos;,
	&apos;/assets/terraform-graphs-2/tooltip-demo-1.svg&apos;,
	&apos;/assets/terraform-graphs-2/tooltip-demo-1.json&apos;)


// better-colors version of svg_activate w/tooltips
svg_activate_color(&apos;div#demo4&apos;,
    &apos;/assets/terraform-graphs-2/demo-3.svg&apos;,
    &apos;/assets/terraform-graphs-2/demo-3.json&apos;);

//svg_activate_color(&apos;div#demo5&apos;,
//    &apos;/assets/terraform-graphs-2/demo-5.svg&apos;, 
//    &apos;/assets/terraform-graphs-2/demo-5.json&apos;);

// current version of svg_activate w/colors w/tooltips w/animations
svg_activate(&apos;div#demo6&apos;,
    &apos;/assets/terraform-graphs-2/demo-3.svg&apos;,
    &apos;/assets/terraform-graphs-2/demo-3.json&apos;);


&lt;/script&gt;

&lt;!--
 Below is the default output for a simple configuration.
&lt;img src=&quot;/assets/terraform-graphs/demo-1.svg&quot;&gt;
--&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;http://28mm.github.io/notes/d3-terraform-graphs&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.reddit.com/r/devops/comments/783prc/exploring_terraform_graphs_with_d3js/&quot;&gt;https://www.reddit.com/r/devops/comments/783prc/exploring_terraform_graphs_with_d3js/&lt;/a&gt; &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:5&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Per the documentation, &lt;a href=&quot;https://www.terraform.io/docs/providers/aws/index.html&quot;&gt;here&lt;/a&gt; &lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
          <pubDate>2017-10-29T00:00:00-07:00</pubDate>
          <link>http://localhost:4000/notes/d3-terraform-graphs-2</link>
          <guid isPermaLink="true">http://localhost:4000/notes/d3-terraform-graphs-2</guid>
        </item>
      
    
      
        <item>
          <title>Exploring Terraform Graphs With D3.js Part 1</title>
          <description>&lt;h3 id=&quot;tldr&quot;&gt;TL;DR&lt;/h3&gt;

&lt;p&gt;As a newcomer to Terraform (and to AWS), I sometimes find it difficult to reason about the many available resource types, and the dependencies that can exist between them. Especially when coming to terms with larger configurations.&lt;/p&gt;

&lt;p&gt;To address this difficulty, I want a tool to help me explore dependency graphs, and resource definitions, interactively. This is the first in a series (parts: &lt;a href=&quot;/notes/d3-terraform-graphs&quot;&gt;one&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-2&quot;&gt;two&lt;/a&gt;, &lt;a href=&quot;/notes/terraform-graphs-3&quot;&gt;three&lt;/a&gt;, &lt;a href=&quot;/notes/d3-terraform-graphs-4&quot;&gt;four&lt;/a&gt;; &lt;a href=&quot;https://www.github.com/28mm/blast-radius&quot;&gt;code&lt;/a&gt;, &lt;a href=&quot;https://28mm.github.io/blast-radius-docs&quot;&gt;documentation&lt;/a&gt;) of posts about building such a tool, using d3.js, starting with the simple example below&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, and building upon it.&lt;/p&gt;

&lt;script src=&quot;/assets/terraform-graphs/js/d3.v3.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;/assets/terraform-graphs/js/d3-tip.js&quot;&gt;&lt;/script&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/terraform-graphs/style.css&quot; /&gt;

&lt;div id=&quot;demo-1&quot;&gt;&lt;/div&gt;

&lt;h3 id=&quot;terraform-and-dependency-graphs-introduced&quot;&gt;Terraform and Dependency Graphs, Introduced&lt;/h3&gt;

&lt;p&gt;Terraform is a remarkable piece of software; it’s like Make for infrastructure. Rather than transforming source into libraries and executables, Terraform transforms resource definitions (such as vm instances, dns records, s3 buckets) into running infrastructure.&lt;/p&gt;

&lt;p&gt;Like Make, Terraform walks a dependency graph to determine the order in which it should create resources, to identify what can be done in parallel, and to re-create resources affected by changes.&lt;/p&gt;

&lt;p&gt;Consider the following example, a straightforward Terraform graph–the same as above–laid out by the graphviz package.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs/demo-1.svg&quot; class=&quot;figure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This graph is easy to understand because it has only a handful of nodes, and an obvious structure. You can easily find the single instance, its provider (aws, in this case), and the few variables they depend on. Here is a slighly more complex example.&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs/demo-2.svg&quot; class=&quot;figure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This is graph remains fairly legible. But larger examples tend to sprawl, making resources harder to find, and dependencies harder to trace.&lt;sup id=&quot;fnref:4&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/terraform-graphs/docker-demo-3.svg&quot; class=&quot;figure&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;interactive-dependency-graphs&quot;&gt;Interactive Dependency Graphs&lt;/h3&gt;

&lt;p&gt;These visualizations could be improved in various ways. Adding color, and varying the shapes used, for instance, as well as collapsing less interesting parts of the graph. But an interactive visualization offers these possibilities and more.&lt;/p&gt;

&lt;p&gt;As a reminder of how this might work, here is the first example, again. The root node is made larger than its dependencies, and nodes of different types are assigned colors, according to an arbitrary scheme.&lt;/p&gt;

&lt;div id=&quot;demo-2&quot;&gt;&lt;/div&gt;

&lt;p&gt;And here is is the second. This example is worryingly dense, compared with the Graphviz version, but being able to call up resource definititions with the mouse is a striking advantage.&lt;/p&gt;

&lt;div id=&quot;demo-3&quot;&gt;&lt;/div&gt;

&lt;p&gt;One possible improvement here is to use curved edges, so that their direction is more obvious. (Tracing an edge in the clockwise direction brings you to a dependency.)&lt;/p&gt;

&lt;div id=&quot;demo-4&quot;&gt;&lt;/div&gt;

&lt;p&gt;That’s an encouraging result, but what about a much larger graph, like the sprawling third example?&lt;/p&gt;

&lt;div id=&quot;demo-5&quot;&gt;&lt;/div&gt;

&lt;p&gt;This version is harder to make sense of than the Graphviz version! It contains so many types of resource, for example, that it exhausts the 20-color palette, used previously.&lt;/p&gt;

&lt;p&gt;Additionally, many of the edges overlap, or are drawn so close together, that they become hard to distinguish.&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;So far this has been a fun exercise, and I’m satisfied with it as a proof of concept. However, larger configurations remain a problem. In the next post, I plan to take up this problem, and explore possible solutions to it.&lt;/p&gt;

&lt;p&gt;Have a suggestion? &lt;a href=&quot;mailto:patrick.mcmurchie@gmail.com&quot;&gt;patrick.mcmurchie@gmail.com&lt;/a&gt;&lt;/p&gt;

&lt;script src=&quot;/assets/terraform-graphs/js/terraform-graph.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
activate(&apos;#demo-1&apos;, &apos;/assets/terraform-graphs/demo-1.json&apos;, 580, 300, false);
activate(&apos;#demo-2&apos;, &apos;/assets/terraform-graphs/demo-1.json&apos;, 580, 300, false);
activate(&apos;#demo-3&apos;, &apos;/assets/terraform-graphs/demo-3.json&apos;, 580, 400, false);
activate(&apos;#demo-4&apos;, &apos;/assets/terraform-graphs/demo-3.json&apos;, 580, 400, true);
activate(&apos;#demo-5&apos;, &apos;/assets/terraform-graphs/docker-demo-3.json&apos;, 580, 600, true);
&lt;/script&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.tf&lt;/code&gt; files borrowed from Udemy’s Terraform course materials, &lt;a href=&quot;https://github.com/wardviaene/terraform-course/tree/master/demo-1&quot;&gt;here&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Terraform directly supports this type of visualization, through its &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;graph&lt;/code&gt; argument: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform graph | dot -Tsvg &amp;gt; graph.svg&lt;/code&gt;. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.tf&lt;/code&gt; files borrowed from Hashicorp’s aws provider examples, &lt;a href=&quot;https://github.com/terraform-providers/terraform-provider-aws&quot;&gt;here&lt;/a&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.tf&lt;/code&gt; files borrowed from Udemy’s Terraform course materials &lt;a href=&quot;https://github.com/wardviaene/terraform-course/tree/master/docker-demo-3&quot;&gt;here&lt;/a&gt; &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
          <pubDate>2017-10-22T00:00:00-07:00</pubDate>
          <link>http://localhost:4000/notes/d3-terraform-graphs</link>
          <guid isPermaLink="true">http://localhost:4000/notes/d3-terraform-graphs</guid>
        </item>
      
    
      
        <item>
          <title>Photo Metadata and Search on MacOS</title>
          <description>&lt;p&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=16278637&quot;&gt;&lt;img src=&quot;/assets/y18.gif&quot; /&gt; This article has been discussed on Hacker News.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Apple’s Photos.app classifies pictures, identifying subjects such as “boat,” and “bicycle,” as well as settings like “cafe,” and “mountains.” It uses this capability to offer vastly better search than before.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Unfortunately these improvements are neither visible to Spotlight, nor available in the Finder. This post documents a method of reconciling Photos.app metadata with filesystem metadata, so that they are indexed by Spotlight.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#xattrs&quot;&gt;The Finder, Extended Attributes, and Spotlight.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#photos-app&quot;&gt;Photos.app Metadata: A SQLite Adventure&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#reconciliation&quot;&gt;Reconciling Photos.db With Spotlight Indices&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a name=&quot;xattrs&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;the-finder-extended-attributes-and-spotlight&quot;&gt;The Finder, Extended Attributes, and Spotlight.&lt;/h3&gt;

&lt;p&gt;Quite a bit of old information remains in circulation, about tagging and searching for documents in MacOS. The Finder seems to recognize a few extended attributes, for the purpose of associating tags and comments with files.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;To keep things simple, I will present only the method that has worked for me.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;com.apple.metadata:_kMDItemUserTags&lt;/code&gt; xattr is used to associate a plist of tags with a file. Spotlight reads this xattr, and indexes its contents. To assign the tags “mountain,” and “alpine” to a file, for instance, you would create a plist:&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC
 &quot;-//Apple//DTD PLIST 1.0//EN&quot;
  &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;plist&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;array&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;mountain&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;alpline&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/array&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/plist&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To associate this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$plist&lt;/code&gt; with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$file&lt;/code&gt;, invoke the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xattr&lt;/code&gt; command, as shown below.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;xattr &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;com.apple.metadata:_kMDItemUserTags&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$plist&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At this point, you should be able to find the file, via the 🔎 icon, or the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mdfind&lt;/code&gt; command, as shown below.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]$ mdfind tag:mountain
/path/to/matching/file
/path/to/another/matching/file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;photos-app&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;photosapp-metadata-a-sqlite-adventure&quot;&gt;Photos.app Metadata: A SQLite Adventure&lt;/h3&gt;

&lt;p&gt;Photos.app does its accounting with a SQLite database, which we’ll call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$photodb&lt;/code&gt;, and set thus:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;Pictures
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;Photo&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Library.photoslibrary
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;database
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ photodb&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/photos.db&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$photodb&lt;/code&gt; is probably open, and locked.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;lsof &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$photodb&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
COMMAND     PID    USER   FD   TYPE DEVICE  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...snip...]
photolibr 15432 patrick    4u   REG    1,1  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...snip...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The trouble with just killing &lt;em&gt;photolibraryd&lt;/em&gt;, is that it will re-spawn, repeatedly. &lt;span class=&quot;redact&quot;&gt;Undoubtedly,&lt;/span&gt; &lt;em&gt;launchd&lt;/em&gt; can be told to disable &lt;em&gt;photolibraryd&lt;/em&gt;, &lt;span class=&quot;redact&quot;&gt;but&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;approved&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;mechanism&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;wasn’t&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;immediately&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;obvious&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;me.&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;new&quot;&gt;Stop the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photolibraryd&lt;/code&gt; service with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;launchctl&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;launchctl stop photolibraryd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;redact&quot;&gt;Instead,&lt;/span&gt;&lt;span class=&quot;new&quot;&gt;Initially,&lt;/span&gt; I opted for an egregious hack, &lt;span class=&quot;new&quot;&gt;which you can read about by copying the redacted text.&lt;/span&gt;&lt;span class=&quot;redact&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;lock&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;its&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;database,&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;photoslibraryd,&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;need&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;able&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;it.&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;simply&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;removed&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;permisions.&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$photodb&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;lsof &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$photodb&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | 
  &lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;{ print $2}&apos;&lt;/span&gt;    | 
  egrep &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; PID         | 
  xargs &lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;redact&quot;&gt;Afterwards–but&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;yet–don’t&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;forget&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;restore&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;redact&quot;&gt;permissions&lt;/span&gt;&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;photos&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;database!&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;You&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;may&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;want&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;restart&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;computer&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;ensure&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;photolibraryd,&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;continues&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;work.&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Now, it’s possible to open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$photodb&lt;/code&gt;, and poke around.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sqlite3 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$photodb&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
SQLite version 3.14.0 2016-07-26 15:17:14
Enter &lt;span class=&quot;s2&quot;&gt;&quot;.help&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;usage hints.
sqlite&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Review the schema with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.schema&lt;/code&gt; command. Quit by sending &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl-d&lt;/code&gt;, or with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.quit&lt;/code&gt; command. Tags (and a lot else) are kept in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RKVersion_stringNote&lt;/code&gt; table.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sqlite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;on&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sqlite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKVersion_stringNote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We need to find the appropriate value of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keyPath&lt;/code&gt;, since this will vary between systems. The following snippet, should suffice to find it:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ KEYPATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt; sqlite3 &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$photodb&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; .schema       | 
  &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;RKVersion_stringNote_skIndexUpdateTrigger&apos;&lt;/span&gt; | 
  &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Eo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;[0-9]{1,4}&apos;&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Okay, but did it work?&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...] echo $KEYPATH
719
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now we can find the strings containing our tags, and associate them with filesystem paths. Be sure to substitute the value of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$KEYPATH&lt;/code&gt; determined above, for the literal &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;719&lt;/code&gt;, below.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sqlite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKMaster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imagePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKVersion_stringNote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKVersion_stringNote&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKMaster&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKVersion_stringNote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attachedToId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKMaster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelId&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RKVersion_stringNote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;719&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* !!! */&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Records will resemble the following:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2015/04/25/20150425-035012/DSC00435.JPG|DSC00435.JPG  \
00435.JPG JPG October 2012 Outdoor Outside Outdoors   \
Outsides Land Lands Mountain Mounts Peak Sierra       \
Sierras Peaks Mountains Mount
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tags aren’t quoted, but always come last. The trouble is that its not obvious which are 1-grams, 2-grams, or n-grams. Various collisions are possible both between tags, and other substrings.&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;reconciliation&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;reconciling-photosapp-metadata-with-filesystem-metadata&quot;&gt;Reconciling Photos.app metadata with filesystem metadata&lt;/h3&gt;

&lt;p&gt;Okay, lets put the pieces together. We need four things:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;a copy of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos.db&lt;/code&gt; in a write-able location.&lt;/li&gt;
  &lt;li&gt;the system-specific value of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$KEYPATH&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;the path to our photos library &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$PHOTOLIB&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos2spotlight.py&lt;/code&gt; (listing &lt;a href=&quot;https://github.com/28mm/macos-photo-scripts&quot;&gt;here&lt;/a&gt;).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Start by getting an idea of what your library contains:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./photos2spotlight.py &lt;span class=&quot;nt&quot;&gt;--stats&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--db&lt;/span&gt; /path/to/copy/of/photos.db 
  &lt;span class=&quot;nt&quot;&gt;--lib&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;~/Pictures/Photos&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Library.photoslibrary/&quot;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--keypath&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$KEYPATH&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...snip...]
    16 Duds
    16 Clothing
    16 Accoutrements
    16 Accoutrement
    16 Clothings
    16 Apparels
    18 Insides
    18 Interior Rooms
    18 Inside
    18 Interior Room
    18 Indoors
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By default, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;photos2spotlight.py&lt;/code&gt; will make a dry run. Use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--write&lt;/code&gt; flag to modify fileystem metadata.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;...]&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./photos2spotlight.py &lt;span class=&quot;nt&quot;&gt;--stats&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--db&lt;/span&gt; /path/to/copy/of/photos.db
  &lt;span class=&quot;nt&quot;&gt;--lib&lt;/span&gt;	&lt;span class=&quot;s2&quot;&gt;&quot;~/Pictures/Photos&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Library.photoslibrary/&quot;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--keypath&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$KEYPATH&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--write&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should now be able to find photos using Spotlight, the Finder, or the related mdfind command. E.g.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[...]$ mdfind &apos;tag:Inside&apos;
.../Masters/2015/04/22/20150422-011045/IMG_0083.JPG
[...snip...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;&lt;span class=&quot;redact&quot;&gt;That’s&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;it.&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;Macs&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;easy,&lt;/span&gt; &lt;span class=&quot;redact&quot;&gt;right?&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Continue to &lt;a href=&quot;/notes/better-photo-search-for-macos&quot;&gt;Part 2&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Google Photos does this too. It’s dramatically less tedious than manual tagging. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kMDItemFinderComment&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kMDItemOMUserTags&lt;/code&gt; are commonly suggested, as well. As far as I can tell, the former is inappropriate, while the latter is disused, except by legacy applications. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[...]$ chmod u+w &quot;$photodb&quot;&lt;/code&gt; &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
          <pubDate>2017-05-25T00:00:00-07:00</pubDate>
          <link>http://localhost:4000/notes/osx-photo-search</link>
          <guid isPermaLink="true">http://localhost:4000/notes/osx-photo-search</guid>
        </item>
      
    
  </channel>
</rss>
